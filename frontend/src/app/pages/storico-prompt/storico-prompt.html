<h2>Storico prompt</h2>

<input
  type="text"
  class="search-input"
  placeholder="Cerca nei prompt o nei risultati..."
  [(ngModel)]="searchTerm"
  (input)="applyFilter()"
/>

@if (loading) {
  <div>Caricamento...</div>
} @else {
  <table class="storico-table">
    <thead>
      <tr>
        <th>Prompt</th>
        <th>Risultato</th>
        <th>Timestamp</th>
      </tr>
    </thead>

    <tbody>
      @for (r of filteredRows; track r.conversationId) {
        <tr>
          <td class="prompt">{{ r.prompt }}</td>
          <td class="risultato">{{ r.risultato }}</td>
          <td>{{ r.timestamp | date:'short' }}</td>
        </tr>
      }

      @if (!filteredRows.length) {
        <tr>
          <td colspan="3" style="text-align:center; padding:16px;">
            Nessun risultato trovato
          </td>
        </tr>
      }
    </tbody>
  </table>
}
